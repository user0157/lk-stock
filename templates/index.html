<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®è¡¨å±•ç¤º</title>

    <!-- æ ·å¼ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- ä½ å·²æœ‰çš„æ’ä»¶ -->
    <script src="{{ url_for('static', filename='plugins/table-filter.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/table-sort-v2.js') }}"></script>
</head>

<body>

    <!-- é¡¶éƒ¨æ  -->
    <div class="top-bar">
        <h2>ğŸ“Š æ¥æ”¶åˆ°çš„æ•°æ®</h2>

        <a href="{{ url_for('auth.logout') }}" class="logout-btn">
            é€€å‡ºç™»å½•
        </a>
    </div>

    <!-- æœç´¢æ¡† -->
    <div class="search-box">
        <input
            type="text"
            id="tableSearch"
            placeholder="ğŸ” æœç´¢è¡¨æ ¼å†…å®¹..."
            onkeyup="filterTable()"
        >
    </div>

    <!-- è¡¨æ ¼ -->
    <div class="table-container">
        <table class="table-sort table-filter">
            <thead>
                <tr>
                    {% for h in headers %}
                        <th>{{ h }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    {% for h in headers %}
                        <td>{{ row[h] }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- æœç´¢ JS -->
    <script>
        function filterTable() {
            const input = document.getElementById("tableSearch");
            const filter = input.value.toLowerCase();

            const table = document.querySelector("table");
            const rows = table.querySelectorAll("tbody tr");

            rows.forEach(row => {
                const text = row.innerText.toLowerCase();
                row.style.display = text.includes(filter) ? "" : "none";
            });
        }
    </script>

</body>
</html>
